<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DischarGen: The Discharge Template Generator</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header>
    <h1>DischarGen</h1>
    <div class="actions">
      <button id="templatesBtn" class="icon-button" title="Templates">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M18.497 4.627L18.5 6.75V15h-1V4.25A2.25 2.25 0 0 0 15.25 2h-9A2.25 2.25 0 0 0 4 4.25v4.129c-.603.404-1 1.09-1 1.871v8.5A3.25 3.25 0 0 0 6.25 22h2.367q.069.004.139.004h6.494q.102 0 .202-.004h2.298A3.25 3.25 0 0 0 21 18.75v-1.5c0-.78-.397-1.467-1-1.871V6.75a2.25 2.25 0 0 0-1.503-2.123M5.5 8V4.25a.75.75 0 0 1 .75-.75h9a.75.75 0 0 1 .75.75V15h-.096a.75.75 0 0 1-.55-.24l-5.61-6.04A2.25 2.25 0 0 0 8.097 8zm-1 2.25a.75.75 0 0 1 .75-.75h2.846a.75.75 0 0 1 .55.24l5.61 6.041a2.25 2.25 0 0 0 1.648.719h2.846a.75.75 0 0 1 .75.75v1.5a1.75 1.75 0 0 1-1.75 1.75H6.25a1.75 1.75 0 0 1-1.75-1.75z" />
        </svg>
      </button>
      <button id="jsonBtn" class="icon-button" title="Export JSON">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M4.5 5.75A2.75 2.75 0 0 1 7.25 3a.75.75 0 0 1 0 1.5C6.56 4.5 6 5.06 6 5.75v4.309c0 .744-.3 1.437-.802 1.941A2.75 2.75 0 0 1 6 13.941v4.309c0 .69.56 1.25 1.25 1.25a.75.75 0 0 1 0 1.5a2.75 2.75 0 0 1-2.75-2.75v-4.308a1.25 1.25 0 0 0-.855-1.186l-.132-.045a.75.75 0 0 1 0-1.422l.132-.045c.51-.17.855-.647.855-1.185zm15 0A2.75 2.75 0 0 0 16.75 3a.75.75 0 0 0 0 1.5c.69 0 1.25.56 1.25 1.25v4.309c0 .744.3 1.437.802 1.941A2.75 2.75 0 0 0 18 13.941v4.309c0 .69-.56 1.25-1.25 1.25a.75.75 0 0 0 0 1.5a2.75 2.75 0 0 0 2.75-2.75v-4.308c0-.539.344-1.016.855-1.186l.132-.045a.75.75 0 0 0 0-1.422l-.132-.045a1.25 1.25 0 0 1-.855-1.185z" />
        </svg>
      </button>
      <button id="pdfBtn" class="icon-button" title="Export PDF">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M3.75 15a2.5 2.5 0 0 1 0 5H2.5v1.25a.75.75 0 0 1-1.5 0v-5.5a.75.75 0 0 1 .75-.75zM2.5 18.5h1.25a1 1 0 1 0 0-2H2.5zM9.25 15A2.75 2.75 0 0 1 12 17.75v1.5A2.75 2.75 0 0 1 9.25 22h-1.5a.75.75 0 0 1-.75-.75v-5.5a.75.75 0 0 1 .75-.75zm-.75 5.5h.75c.69 0 1.25-.56 1.25-1.25v-1.5c0-.69-.56-1.25-1.25-1.25H8.5zm8.25-5.5a.75.75 0 0 1 0 1.5H14.5V18h1.75a.75.75 0 0 1 0 1.5H14.5v1.75a.75.75 0 0 1-1.5 0v-5.5a.75.75 0 0 1 .75-.75zM12.129 2a2.25 2.25 0 0 1 1.59.66l5.622 5.62c.422.422.659.994.659 1.591V19.5a2.5 2.5 0 0 1-2.5 2.5h-2.17a1.74 1.74 0 0 0 .17-.75v-.75h2a1 1 0 0 0 1-1V10H14a2 2 0 0 1-2-2V3.5H6.5a1 1 0 0 0-1 1V14H4V4.5A2.5 2.5 0 0 1 6.5 2zM13.5 8a.5.5 0 0 0 .5.5h3.44L13.5 4.56z" />
        </svg>
      </button>
      <button id="settingsBtn" class="icon-button" title="Settings">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.4-.615a.75.75 0 0 1 .85.174a9.8 9.8 0 0 1 2.205 3.792a.75.75 0 0 1-.272.825l-1.241.916a1.38 1.38 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826a9.8 9.8 0 0 1-2.204 3.792a.75.75 0 0 1-.849.175l-1.406-.617a1.38 1.38 0 0 0-1.926 1.114l-.17 1.526a.75.75 0 0 1-.571.647a9.5 9.5 0 0 1-4.406 0a.75.75 0 0 1-.572-.647l-.169-1.524a1.382 1.382 0 0 0-1.925-1.11l-1.406.616a.75.75 0 0 1-.85-.175a9.8 9.8 0 0 1-2.203-3.796a.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.272-.826a9.8 9.8 0 0 1 2.205-3.792a.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65q1.074-.238 2.201-.252m0 1.5a9 9 0 0 0-1.354.117l-.11.977A2.886 2.886 0 0 1 6.526 7.17l-.899-.394A8.3 8.3 0 0 0 4.28 9.092l.797.587a2.88 2.88 0 0 1 .001 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.109.984c.89.15 1.799.15 2.688 0l.11-.984a2.88 2.88 0 0 1 4.018-2.322l.904.396a8.3 8.3 0 0 0 1.348-2.318l-.798-.588a2.88 2.88 0 0 1-.001-4.643l.797-.587a8.3 8.3 0 0 0-1.348-2.317l-.897.393a2.884 2.884 0 0 1-4.023-2.324l-.109-.976a9 9 0 0 0-1.334-.117M12 8.25a3.75 3.75 0 1 1 0 7.5a3.75 3.75 0 0 1 0-7.5m0 1.5a2.25 2.25 0 1 0 0 4.5a2.25 2.25 0 0 0 0-4.5" />
        </svg>
      </button>
    </div>
  </header>
  <main>
    <div id="formContainer"></div>
  </main>
  <footer>
    <p>&copy; ShankarBUS</p>
  </footer>
  <!-- Templates Modal -->
  <div id="templatesModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="templatesTitle">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="templatesTitle">Templates</h2>
        <button class="modal-close" data-close="templatesModal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div id="templatesTree" class="tree"></div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="settingsTitle">Settings</h2>
        <button class="modal-close" data-close="settingsModal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <fieldset class="field">
          <legend>Theme</legend>
          <label><input type="radio" name="themeMode" value="system">System</label>
          <label><input type="radio" name="themeMode" value="light">Light</label>
          <label><input type="radio" name="themeMode" value="dark">Dark</label>
        </fieldset>
      </div>
    </div>
  </div>

  <!-- JSON Export Modal -->
  <div id="jsonModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="jsonTitle">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="jsonTitle">Export JSON</h2>
        <button class="modal-close" data-close="jsonModal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <textarea id="jsonPreview" rows="12" style="width:100%;"></textarea>
      </div>
      <div class="modal-footer">
        <button id="copyJsonBtn" class="icon-button" title="Copy JSON">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24">
            <path fill="currentColor"
              d="M5.503 4.627L5.5 6.75v10.504a3.25 3.25 0 0 0 3.25 3.25h8.616a2.25 2.25 0 0 1-2.122 1.5H8.75A4.75 4.75 0 0 1 4 17.254V6.75c0-.98.627-1.815 1.503-2.123M17.75 2A2.25 2.25 0 0 1 20 4.25v13a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-13A2.25 2.25 0 0 1 8.75 2zm0 1.5h-9a.75.75 0 0 0-.75.75v13c0 .414.336.75.75.75h9a.75.75 0 0 0 .75-.75v-13a.75.75 0 0 0-.75-.75" />
          </svg>
        </button>
        <button id="downloadJsonBtn" class="icon-button" title="Download JSON">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24">
            <path fill="currentColor"
              d="M6 2a2 2 0 0 0-2 2v7.498a6.5 6.5 0 0 1 1.5-.422V4a.5.5 0 0 1 .5-.5h6V8a2 2 0 0 0 2 2h4.5v10a.5.5 0 0 1-.5.5h-5.732A6.5 6.5 0 0 1 11.19 22H18a2 2 0 0 0 2-2V9.828a2 2 0 0 0-.586-1.414l-5.828-5.828A2 2 0 0 0 12.172 2zm11.38 6.5H14a.5.5 0 0 1-.5-.5V4.62zm-5.38 9a5.5 5.5 0 1 1-11 0a5.5 5.5 0 0 1 11 0m-5-3a.5.5 0 0 0-1 0v4.793l-1.646-1.647a.5.5 0 0 0-.708.708l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5a.5.5 0 0 0-.708-.708L7 19.293z" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- PDF Export Modal -->
  <div id="pdfModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="pdfTitle">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="pdfTitle">Export PDF</h2>
        <button class="modal-close" data-close="pdfModal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Choose an action for the generated PDF.</p>
      </div>
      <div class="modal-footer">
        <button id="pdfPreviewBtn" class="icon-button" title="Preview PDF">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24">
            <path fill="currentColor"
              d="M6.25 4.5A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .966.783 1.75 1.75 1.75h11.5a1.75 1.75 0 0 0 1.75-1.75v-4a.75.75 0 0 1 1.5 0v4A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h4a.75.75 0 0 1 0 1.5zM13 3.75a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 .75.75v6.5a.75.75 0 0 1-1.5 0V5.56l-5.22 5.22a.75.75 0 0 1-1.06-1.06l5.22-5.22h-4.69a.75.75 0 0 1-.75-.75" />
          </svg>
        </button>
        <button id="pdfPrintBtn" class="icon-button" title="Print PDF">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24">
            <path fill="currentColor"
              d="M18.5 20a.5.5 0 0 1-.5.5h-5.268a2 2 0 0 1-1.732 1h-.011a2.7 2.7 0 0 1-.093.5H18a2 2 0 0 0 2-2V9.828a2 2 0 0 0-.586-1.414l-5.829-5.828l-.049-.04l-.036-.03a2 2 0 0 0-.219-.18a1 1 0 0 0-.08-.044l-.048-.024l-.05-.029c-.054-.031-.109-.063-.166-.087a2 2 0 0 0-.624-.138q-.03-.002-.059-.007L12.172 2H6a2 2 0 0 0-2 2v7.104Q4.358 11 4.75 11h.75V4a.5.5 0 0 1 .5-.5h6V8a2 2 0 0 0 2 2h4.5zm-5-15.379L17.378 8.5H14a.5.5 0 0 1-.5-.5zM3 13.75c0-.966.784-1.75 1.75-1.75h3.5c.966 0 1.75.784 1.75 1.75v.75h.5A1.5 1.5 0 0 1 12 16v3.5a1 1 0 0 1-1 1h-1v.75A1.75 1.75 0 0 1 8.25 23h-3.5A1.75 1.75 0 0 1 3 21.25v-.75H2a1 1 0 0 1-1-1V16a1.5 1.5 0 0 1 1.5-1.5H3zm5.5 0a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25v.75h4zm-4 5.5v2c0 .138.112.25.25.25h3.5a.25.25 0 0 0 .25-.25v-2a.25.25 0 0 0-.25-.25h-3.5a.25.25 0 0 0-.25.25" />
          </svg>
        </button>
        <button id="pdfDownloadBtn" class="icon-button" title="Download PDF">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="128" height="128" viewBox="0 0 24 24">
            <path fill="currentColor"
              d="M6 2a2 2 0 0 0-2 2v7.498a6.5 6.5 0 0 1 1.5-.422V4a.5.5 0 0 1 .5-.5h6V8a2 2 0 0 0 2 2h4.5v10a.5.5 0 0 1-.5.5h-5.732A6.5 6.5 0 0 1 11.19 22H18a2 2 0 0 0 2-2V9.828a2 2 0 0 0-.586-1.414l-5.828-5.828A2 2 0 0 0 12.172 2zm11.38 6.5H14a.5.5 0 0 1-.5-.5V4.62zm-5.38 9a5.5 5.5 0 1 1-11 0a5.5 5.5 0 0 1 11 0m-5-3a.5.5 0 0 0-1 0v4.793l-1.646-1.647a.5.5 0 0 0-.708.708l2.5 2.5a.5.5 0 0 0 .708 0l2.5-2.5a.5.5 0 0 0-.708-.708L7 19.293z" />
          </svg>
        </button>
      </div>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.3.0-beta.18/pdfmake.min.js"></script>
  <script type="module" src="./app.js"></script>
</body>

</html>